AmCharts.translations.dataLoader={},AmCharts.addInitHandler(function(chart){function loadFile(url,holder,options,providerKey){void 0===providerKey&&(providerKey="dataProvider"),options.showCurtain&&showCurtain(void 0,options.noStyles),l.remaining++,l.percentLoaded[url]=0,void 0!==options.progress&&"function"==typeof options.progress&&void 0===options._progress&&(options._progress=options.progress,options.progress=function(percent){l.percentLoaded[url]=percent;var totalPercent=0,fileCount=0;for(var x in l.percentLoaded)l.percentLoaded.hasOwnProperty(x)&&(fileCount++,totalPercent+=l.percentLoaded[x]);var globalPercent=Math.round(totalPercent/fileCount*100)/100;options._progress.call(this,globalPercent,Math.round(100*percent)/100,url)}),AmCharts.loadFile(url,options,function(response){if(!1===response)callFunction(options.error,options,chart),raiseError(AmCharts.__("Error loading the file",chart.language)+": "+url,!1,options);else{switch(void 0===options.format&&(options.format="json"),options.format=options.format.toLowerCase(),options.format){case"json":if(holder[providerKey]=AmCharts.parseJSON(response),!1===holder[providerKey])return callFunction(options.error,options,chart),raiseError(AmCharts.__("Error parsing JSON file",chart.language)+": "+l.url,!1,options),void(holder[providerKey]=[]);holder[providerKey]=postprocess(holder[providerKey],options),callFunction(options.load,options,chart);break;case"csv":if(holder[providerKey]=AmCharts.parseCSV(response,options),!1===holder[providerKey])return callFunction(options.error,options,chart),raiseError(AmCharts.__("Error parsing CSV file",chart.language)+": "+l.url,!1,options),void(holder[providerKey]=[]);holder[providerKey]=postprocess(holder[providerKey],options),callFunction(options.load,options,chart);break;default:return callFunction(options.error,options,chart),void raiseError(AmCharts.__("Unsupported data format",chart.language)+": "+options.format,!1,options.noStyles)}if(l.remaining--,0===l.remaining&&(callFunction(options.complete,chart),options.async))if("map"===chart.type)chart.validateNow(!0),removeCurtain();else if("gauge"!==chart.type&&chart.addListener("dataUpdated",function(event){"stock"!==chart.type||options.reloading||void 0===chart.periodSelector||chart.periodSelector.setDefaultPeriod(),removeCurtain(),chart.events.dataUpdated.pop()}),chart.validateData(),"gauge"===chart.type&&removeCurtain(),l.startDuration)if("stock"===chart.type){chart.panelsSettings.startDuration=l.startDuration;for(var x=0;x<chart.panels.length;x++)chart.panels[x].startDuration=l.startDuration,chart.panels[x].animateAgain()}else chart.startDuration=l.startDuration,void 0!==chart.animateAgain&&chart.animateAgain();options.reload&&(options.timeout&&clearTimeout(options.timeout),options.timeout=setTimeout(loadFile,1e3*options.reload,url,holder,options,providerKey),options.reloading=!0)}})}function postprocess(data,options){if(void 0===options.postProcess||!isFunction(options.postProcess))return data;try{return options.postProcess.call(l,data,options,chart)}catch(e){return raiseError(AmCharts.__("Error loading file",chart.language)+": "+options.url,!1,options),data}}function isObject(obj){return"object"==typeof obj}function isFunction(obj){return"function"==typeof obj}function applyDefaults(obj){for(var x in defaults)defaults.hasOwnProperty(x)&&setDefault(obj,x,defaults[x])}function setDefault(obj,key,value){void 0===obj[key]&&(obj[key]=value)}function raiseError(msg,error,options){options.showErrors?showCurtain(msg,options.noStyles):(removeCurtain(),console.log(msg))}function showCurtain(msg,noStyles){removeCurtain(),void 0===msg&&(msg=AmCharts.__("Loading data...",chart.language));var curtain=document.createElement("div");if(curtain.setAttribute("id",chart.div.id+"-curtain"),curtain.className="amcharts-dataloader-curtain",!0!==noStyles){curtain.style.position="absolute",curtain.style.top=0,curtain.style.left=0,curtain.style.width=(void 0!==chart.realWidth?chart.realWidth:chart.divRealWidth)+"px",curtain.style.height=(void 0!==chart.realHeight?chart.realHeight:chart.divRealHeight)+"px",curtain.style.textAlign="center",curtain.style.display="table",curtain.style.fontSize="20px";try{curtain.style.background="rgba(255, 255, 255, 0.3)"}catch(e){curtain.style.background="rgb(255, 255, 255)"}curtain.innerHTML='<div style="display: table-cell; vertical-align: middle;">'+msg+"</div>"}else curtain.innerHTML=msg;chart.containerDiv.appendChild(curtain),l.curtain=curtain}function removeCurtain(){try{void 0!==l.curtain&&chart.containerDiv.removeChild(l.curtain)}catch(e){}l.curtain=void 0}function callFunction(func,param1,param2,param3){"function"==typeof func&&func.call(l,param1,param2,param3)}void 0!==chart.dataLoader&&isObject(chart.dataLoader)||(chart.dataLoader={});var version=chart.version.split(".");if(!(Number(version[0])<3||3===Number(version[0])&&Number(version[1])<13)){var l=chart.dataLoader;l.remaining=0,l.percentLoaded={};var defaults={async:!0,format:"json",showErrors:!0,showCurtain:!0,noStyles:!1,reload:0,timestamp:!1,delimiter:",",skip:0,skipEmpty:!0,emptyAs:void 0,useColumnNames:!1,init:!1,progress:!1,reverse:!1,reloading:!1,complete:!1,error:!1,numberFields:[],headers:[],chart:chart};l.loadData=function(){if("stock"===chart.type)setTimeout(function(){0>chart.panelsSettings.startDuration&&(l.startDuration=chart.panelsSettings.startDuration,chart.panelsSettings.startDuration=0);for(var x=0;x<chart.dataSets.length;x++){var ds=chart.dataSets[x];void 0!==ds.dataLoader&&void 0!==ds.dataLoader.url&&(callFunction(ds.dataLoader.init,ds.dataLoader,chart),ds.dataProvider=[],applyDefaults(ds.dataLoader),loadFile(ds.dataLoader.url,ds,ds.dataLoader,"dataProvider")),void 0!==ds.eventDataLoader&&void 0!==ds.eventDataLoader.url&&(callFunction(ds.eventDataLoader.init,ds.eventDataLoader,chart),ds.events=[],applyDefaults(ds.eventDataLoader),loadFile(ds.eventDataLoader.url,ds,ds.eventDataLoader,"stockEvents"))}},100);else{if(callFunction(l.init,l,chart),applyDefaults(l),void 0===l.url)return;void 0!==chart.startDuration&&0<chart.startDuration&&(l.startDuration=chart.startDuration,chart.startDuration=0),"gauge"===chart.type?(void 0===chart.arrows&&(chart.arrows=[]),loadFile(l.url,chart,l,"arrows")):(void 0===chart.dataProvider&&(chart.dataProvider="map"===chart.type?{}:[]),loadFile(l.url,chart,l,"dataProvider"))}},l.loadData()}},["pie","serial","xy","funnel","radar","gauge","gantt","stock","map"]),void 0===AmCharts.__&&(AmCharts.__=function(msg,language){return void 0!==language&&void 0!==AmCharts.translations.dataLoader[language]&&void 0!==AmCharts.translations.dataLoader[language][msg]?AmCharts.translations.dataLoader[language][msg]:msg}),AmCharts.loadFile=function(url,options,handler){"object"!=typeof options&&(options={}),void 0===options.async&&(options.async=!0);var request;request=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");try{request.open("GET",options.timestamp?AmCharts.timestampUrl(url):url,options.async)}catch(e){handler.call(this,!1)}if(void 0!==options.headers&&options.headers.length)for(var i=0;i<options.headers.length;i++){var header=options.headers[i];request.setRequestHeader(header.key,header.value)}void 0!==options.progress&&"function"==typeof options.progress&&(request.onprogress=function(e){var complete=e.loaded/e.total*100;options.progress.call(this,complete)}),request.onreadystatechange=function(){4===request.readyState&&404===request.status?handler.call(this,!1):4===request.readyState&&200===request.status&&handler.call(this,request.responseText)};try{request.send()}catch(e){handler.call(this,!1)}},AmCharts.parseJSON=function(response){try{return void 0!==JSON?JSON.parse(response):eval(response)}catch(e){return!1}},AmCharts.parseCSV=function(response,options){var col,i,data=AmCharts.CSVToArray(response,options.delimiter),numbers=options.numberFields&&options.numberFields.length>0,res=[],cols=[];if(options.useColumnNames){cols=data.shift();for(var x=0;x<cols.length;x++)col=cols[x].replace(/^\s+|\s+$/gm,""),""===col&&(col="col"+x),cols[x]=col;0<options.skip&&options.skip--}for(i=0;i<options.skip;i++)data.shift();for(var row;row=options.reverse?data.pop():data.shift();)if(!options.skipEmpty||1!==row.length||""!==row[0]){var dataPoint={};for(i=0;i<row.length;i++)col=void 0===cols[i]?"col"+i:cols[i],dataPoint[col]=""===row[i]?options.emptyAs:row[i],numbers&&-1!==options.numberFields.indexOf(col)&&(dataPoint[col]=Number(dataPoint[col]));res.push(dataPoint)}return res},AmCharts.CSVToArray=function(strData,strDelimiter){strDelimiter=strDelimiter||",";for(var objPattern=new RegExp("(\\"+strDelimiter+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+strDelimiter+"\\r\\n]*))","gi"),arrData=[[]],arrMatches=null;arrMatches=objPattern.exec(strData);){var strMatchedDelimiter=arrMatches[1];strMatchedDelimiter.length&&strMatchedDelimiter!==strDelimiter&&arrData.push([]);var strMatchedValue;strMatchedValue=arrMatches[2]?arrMatches[2].replace(new RegExp('""',"g"),'"'):arrMatches[3],arrData[arrData.length-1].push(strMatchedValue)}return arrData},AmCharts.timestampUrl=function(url){var p=url.split("?");return 1===p.length?p[1]=(new Date).getTime():p[1]+="&"+(new Date).getTime(),p.join("?")};